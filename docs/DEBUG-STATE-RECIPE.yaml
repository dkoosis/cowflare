# DEBUG-STATE-RECIPE-V1
# Recipe for creating machine-optimized inter-session state

format_principles:
  brevity: "keys>prose"
  precision: "line_numbers>descriptions"
  actionable: "next_command>next_concept"
  measurable: "error_codes>error_descriptions"
  traceable: "exact_values>summaries"

required_sections:
  meta:
  - goal: "ultimate_objective"
  - endpoint: "live_url"
  - deployment: "current_version_id"
  - last_update: "ISO_timestamp"

  state:
    desc: "binary_status_each_component"
    values: [ "PASS", "FAIL", "UNTESTED", "PARTIAL" ]

  proven:
    desc: "verified_facts_as_assertions"
    format: "fact==value OR fact!=value"
    examples:
    - "method==serve() NOT serveStreamableHttp()"
    - "type==string NOT string[]"

  failed:
    desc: "what_broke->error_code"
    format: "attempt->error_number"

  hypotheses:
    desc: "testable_next_steps"
    format:
      id:
        desc: "condition->expected_outcome"
        test: "exact_command_or_action"
        priority: 1-N

  next_action:
    desc: "immediate_next_command"
    format: "tool:specific_action"

  code_refs:
    desc: "exact_locations"
    format: "name: file:line_number"

  errors_fixed:
    desc: "problem->solution"
    format: "symptom->fix_applied"

  test_results:
    desc: "actual_values_from_tests"
    include: [ "urls", "tokens", "ids", "responses" ]

  sessions:
    desc: "work_chunks"
    format:
    - ts: "ISO_timestamp"
      fixes: [ "what_got_fixed" ]
      time: "minutes_spent"

  metrics:
    desc: "performance_tracking"
    format:
      orientation: [ seconds_per_session ]
      redundant: [ count_per_session ]
      hypothesis_success: [ success_count ]
      forward: boolean

optimization_rules:
  1: "Remove all explanatory text"
  2: "Use actual values not descriptions"
  3: "Include error codes not messages"
  4: "List files:lines not 'in file X'"
  5: "Commands not concepts for next_action"
  6: "Arrays for time series data"
  7: "Exact test inputs/outputs"
  8: "ISO timestamps everywhere"
  9: "Abbreviate without losing precision"
  10: "Structure for grep/parse ability"

anti_patterns:
- "verbose_descriptions"
- "missing_line_numbers"
- "vague_next_steps"
- "prose_in_values"
- "missing_error_codes"
- "approximate_values"

usage:
  1: "At session end, update with findings"
  2: "At session start, parse for context"
  3: "During debug, add discoveries"
  4: "On success, move hypothesis->proven"
  5: "On failure, add to failed with code"
